<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regular Verb Pronunciation Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #fce4ec; /* Sea Foam Pink Background */
            margin: 0;
            text-align: center;
        }
        #game-container {
            background-color: #fce4ec; /* Match body background */
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
        }
        h2 {
            color: #333;
            margin-bottom: 20px;
        }
        .verb-display {
            font-size: 2.5em;
            font-weight: bold;
            color: #4caf50; /* Changed to Sea Foam Green */
            cursor: pointer;
            padding: 10px 20px;
            border: 2px solid #4caf50; /* Changed border to Sea Foam Green */
            border-radius: 8px;
            display: inline-block;
            margin-bottom: 10px;
            user-select: none;
        }
        .verb-display:active {
            transform: scale(0.98);
        }
        #translation {
            font-size: 1.2em;
            color: #555;
            margin-bottom: 20px;
        }
        #question-text {
            font-size: 1.1em;
            color: #777;
            margin-bottom: 25px;
        }
        .past-tense-reveal {
            font-size: 2em;
            font-weight: bold;
            color: #4caf50; 
            cursor: pointer;
            padding: 5px 10px;
            display: inline-block;
            margin-top: 15px;
            border-bottom: 3px dashed #4caf50;
            user-select: none;
        }
        .past-tense-reveal:active {
            opacity: 0.8;
        }
        .button-group button,
        #reveal-button,
        #start-game-button,
        #round-summary-view button {
            background-color: #4caf50; /* Sea Foam Green Button Color */
            color: white;
            border: none;
            padding: 12px 25px;
            margin: 5px;
            border-radius: 5px; /* Rounded buttons */
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .button-group button:hover,
        #reveal-button:hover,
        #start-game-button:hover,
        #round-summary-view button:hover {
            background-color: #388e3c;
        }
        /* Make specific buttons larger */
        #reveal-button, #start-game-button {
            padding: 15px 40px !important;
            font-size: 1.2em !important;
            font-weight: bold;
            min-width: 250px;
        }
        
        .score-box {
            margin-top: 20px;
            font-size: 1.2em;
            color: #333;
        }
        #round-summary {
            margin-top: 20px;
            text-align: left;
            padding: 15px;
            background-color: #f8bbd0; 
            border-radius: 8px;
        }
        .summary-item {
            margin-bottom: 10px;
            font-size: 0.95em;
        }
        .hidden {
            display: none;
        }
        /* Style for Instructions screen */
        #instructions-view {
            text-align: center; /* Centered content */
        }
        #instructions-view ul {
            list-style: none;
            padding-left: 0;
            max-width: 450px; 
            margin: 0 auto 20px auto; 
            text-align: left; /* Keep list items left-aligned for readability */
        }
        #instructions-view li {
            margin-bottom: 10px;
            line-height: 1.4;
        }
        #instructions-view h3 {
            color: #e91e63;
        }
        .instruction-section {
            margin-bottom: 25px; 
            text-align: center; /* Center the entire section block */
        }
        .instruction-title {
            font-weight: bold;
            color: #e91e63; /* Pink for titles */
            margin-bottom: 10px;
            font-size: 1.1em;
            text-align: center;
        }
        /* Ensure the button is centered via flex on the container */
        #instructions-view {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="instructions-view">
        <h2 style="color: #e91e63;">How to Play</h2>
        
        <div class="instruction-section">
            <div class="instruction-title">English Instructions:</div>
            <p>This game tests your intuition for the correct pronunciation for simple past tense verbs.</p>
            <p style="font-weight: bold;">10 rounds of 10 words each.</p>
            <ul>
                <li>Step 1: Click the word to hear its pronunciation.</li>
                <li>Step 2: Think about how the past tense is pronounced.</li>
                <li>Step 3: Click "Past Tense".</li>
                <li>Step 4: Answer Yes, No, or Not Sure to score points.</li>
                <li>End of Round: See your score and sample sentences for all 10 words.</li>
            </ul>
        </div>

        <div class="instruction-section">
            <div class="instruction-title">æ—¥æœ¬èªã§ã®éŠã³æ–¹:</div>
            <p>ã“ã®ã‚²ãƒ¼ãƒ ã¯ã€è‹±èªã®è¦å‰‡å‹•è©ã®éå»å½¢ã®ç™ºéŸ³ã«å¯¾ã™ã‚‹ç›´æ„Ÿã‚’è©¦ã—ã¾ã™ã€‚</p>
            <p style="font-weight: bold;">1ãƒ©ã‚¦ãƒ³ãƒ‰10å˜èªã€å…¨10ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã™ã€‚</p>
            <ul>
                <li>ã‚¹ãƒ†ãƒƒãƒ—1: å˜èªã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç™ºéŸ³ã‚’èãã¾ã™ã€‚</li>
                <li>ã‚¹ãƒ†ãƒƒãƒ—2: éå»å½¢ãŒã©ã®ã‚ˆã†ã«ç™ºéŸ³ã•ã‚Œã‚‹ã‹ã‚’è€ƒãˆã¾ã™ã€‚</li>
                <li>ã‚¹ãƒ†ãƒƒãƒ—3: ã€ŒPast Tenseã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</li>
                <li>ã‚¹ãƒ†ãƒƒãƒ—4: ã€ŒYes, No, Not Sureã€ã§å›ç­”ã—ã€ã‚¹ã‚³ã‚¢ã‚’ç²å¾—ã—ã¾ã™ã€‚</li>
                <li>ãƒ©ã‚¦ãƒ³ãƒ‰çµ‚äº†: ã‚¹ã‚³ã‚¢ã¨10å˜èªå…¨ã¦ã®ä¾‹æ–‡ã‚’ç¢ºèªã—ã¾ã™ã€‚</li>
            </ul>
        </div>
        
        <button id="start-game-button" onclick="startGame()">Start Game</button>
    </div>

    <div id="current-word-view" class="hidden">
        <h2 id="round-header">Round 1: Word 1 / 10</h2>
        
        <div id="translation">[Japanese Definition]</div>
        <div id="base-verb-display" class="verb-display" onclick="speakText(currentWord.base_verb)">BASE VERB</div>
        <div id="question-text">Click the verb to hear it. What is its past tense?</div>
        
        <button id="reveal-button" onclick="revealPastTense()">Past Tense</button>
        <div id="past-tense-container" class="hidden">
            <div id="past-tense-display" class="past-tense-reveal" onclick="speakText(currentWord.past_tense)"></div>
            <p style="margin-top: 20px; color: #333;">Is this what you thought?</p>
            <div id="feedback-buttons" class="button-group">
                <button onclick="submitFeedback(1)">Yes <span id="reward-visual"></span></button>
                <button onclick="submitFeedback(0.5)">Not Sure</button>
                <button onclick="submitFeedback(0)">No</button>
            </div>
        </div>
    </div>

    <div id="round-summary-view" class="hidden">
        <h3>Round <span id="summary-round-number"></span> Complete!</h3>
        <div class="score-box">
            Round Score: <span id="round-score-display">0</span> <span style="font-size: 1.5em;">ğŸª™</span>
        </div>
        <h4>Sample Sentences:</h4>
        <div id="round-summary"></div>
        <button onclick="startNextRound()">Start Next Round</button>
    </div>

    <div class="score-box">
        Total Score: <span id="total-score-display">0</span> <span style="font-size: 1.5em;">ğŸ¥‡</span>
    </div>
</div>

<script>
// =======================================================================
// PART 1: GAME DATA (The 110 Verbs)
// =======================================================================

const GAME_DATA = [
  {
    "round_number": 1,
    "words": [
      {
        "base_verb": "WANT",
        "past_tense": "wanted",
        "category": "ID",
        "japanese_def": "[~ã—ãŸã„]",
        "sample_sentence": "She wanted a new book for her birthday."
      },
      {
        "base_verb": "LOOK",
        "past_tense": "looked",
        "category": "T",
        "japanese_def": "[è¦‹ã‚‹]",
        "sample_sentence": "He looked out the window at the rain."
      },
      {
        "base_verb": "USE",
        "past_tense": "used",
        "category": "D",
        "japanese_def": "[ä½¿ã†]",
        "sample_sentence": "They used all the sugar in the cake."
      },
      {
        "base_verb": "WORK",
        "past_tense": "worked",
        "category": "T",
        "japanese_def": "[åƒã]",
        "sample_sentence": "I worked late last night to finish the report."
      },
      {
        "base_verb": "CALL",
        "past_tense": "called",
        "category": "D",
        "japanese_def": "[å‘¼ã¶]",
        "sample_sentence": "We called the technician to fix the computer."
      },
      {
        "base_verb": "TRY",
        "past_tense": "tried",
        "category": "D",
        "japanese_def": "[è©¦ã™]",
        "sample_sentence": "She tried to solve the puzzle, but couldn't."
      },
      {
        "base_verb": "ASK",
        "past_tense": "asked",
        "category": "T",
        "japanese_def": "[å°‹ã­ã‚‹]",
        "sample_sentence": "He asked me a difficult question."
      },
      {
        "base_verb": "NEED",
        "past_tense": "needed",
        "category": "ID",
        "japanese_def": "[å¿…è¦ã¨ã™ã‚‹]",
        "sample_sentence": "They needed more time to finish the project."
      },
      {
        "base_verb": "SEEM",
        "past_tense": "seemed",
        "category": "D",
        "japanese_def": "[ã€œã®ã‚ˆã†ã«è¦‹ãˆã‚‹]",
        "sample_sentence": "It seemed like a good idea at the time."
      },
      {
        "base_verb": "HELP",
        "past_tense": "helped",
        "category": "T",
        "japanese_def": "[åŠ©ã‘ã‚‹]",
        "sample_sentence": "I helped my neighbor carry groceries."
      }
    ]
  },
  {
    "round_number": 2,
    "words": [
      {
        "base_verb": "TALK",
        "past_tense": "talked",
        "category": "T",
        "japanese_def": "[è©±ã™]",
        "sample_sentence": "We talked for hours about the movie."
      },
      {
        "base_verb": "TURN",
        "past_tense": "turned",
        "category": "D",
        "japanese_def": "[æ›²ãŒã‚‹]",
        "sample_sentence": "The car turned the corner quickly."
      },
      {
        "base_verb": "START",
        "past_tense": "started",
        "category": "ID",
        "japanese_def": "[å§‹ã‚ã‚‹]",
        "sample_sentence": "The concert started exactly at eight o'clock."
      },
      {
        "base_verb": "PLAY",
        "past_tense": "played",
        "category": "D",
        "japanese_def": "[éŠã¶]",
        "sample_sentence": "They played soccer until sunset."
      },
      {
        "base_verb": "MOVE",
        "past_tense": "moved",
        "category": "D",
        "japanese_def": "[å‹•ã]",
        "sample_sentence": "He moved the chair closer to the table."
      },
      {
        "base_verb": "LIKE",
        "past_tense": "liked",
        "category": "T",
        "japanese_def": "[å¥½ã‚€]",
        "sample_sentence": "I liked the new restaurant very much."
      },
      {
        "base_verb": "LIVE",
        "past_tense": "lived",
        "category": "D",
        "japanese_def": "[ä½ã‚€]",
        "sample_sentence": "She lived in Paris for five years."
      },
      {
        "base_verb": "BELIEVE",
        "past_tense": "believed",
        "category": "D",
        "japanese_def": "[ä¿¡ã˜ã‚‹]",
        "sample_sentence": "They believed the story immediately."
      },
      {
        "base_verb": "HAPPEN",
        "past_tense": "happened",
        "category": "D",
        "japanese_def": "[èµ·ã“ã‚‹]",
        "sample_sentence": "The accident happened quickly."
      },
      {
        "base_verb": "PROVIDE",
        "past_tense": "provided",
        "category": "ID",
        "japanese_def": "[æä¾›ã™ã‚‹]",
        "sample_sentence": "The hotel provided towels for all guests."
      }
    ]
  },
  {
    "round_number": 3,
    "words": [
      {
        "base_verb": "INCLUDE",
        "past_tense": "included",
        "category": "ID",
        "japanese_def": "[å«ã‚€]",
        "sample_sentence": "The price included breakfast and dinner."
      },
      {
        "base_verb": "CONTINUE",
        "past_tense": "continued",
        "category": "D",
        "japanese_def": "[ç¶šã‘ã‚‹]",
        "sample_sentence": "She continued her presentation after the break."
      },
      {
        "base_verb": "CHANGE",
        "past_tense": "changed",
        "category": "D",
        "japanese_def": "[å¤‰ãˆã‚‹]",
        "sample_sentence": "The weather changed dramatically overnight."
      },
      {
        "base_verb": "WATCH",
        "past_tense": "watched",
        "category": "T",
        "japanese_def": "[è¦‹ã‚‹]",
        "sample_sentence": "We watched a movie last Saturday."
      },
      {
        "base_verb": "FOLLOW",
        "past_tense": "followed",
        "category": "D",
        "japanese_def": "[å¾“ã†]",
        "sample_sentence": "The dog followed the scent into the woods."
      },
      {
        "base_verb": "STOP",
        "past_tense": "stopped",
        "category": "T",
        "japanese_def": "[æ­¢ã‚ã‚‹]",
        "sample_sentence": "The bus stopped right in front of the building."
      },
      {
        "base_verb": "CREATE",
        "past_tense": "created",
        "category": "ID",
        "japanese_def": "[å‰µé€ ã™ã‚‹]",
        "sample_sentence": "She created a beautiful painting for the exhibit."
      },
      {
        "base_verb": "ALLOW",
        "past_tense": "allowed",
        "category": "D",
        "japanese_def": "[è¨±ã™]",
        "sample_sentence": "My parents allowed me to go to the party."
      },
      {
        "base_verb": "ADD",
        "past_tense": "added",
        "category": "ID",
        "japanese_def": "[åŠ ãˆã‚‹]",
        "sample_sentence": "He added sugar to his coffee."
      },
      {
        "base_verb": "OPEN",
        "past_tense": "opened",
        "category": "D",
        "japanese_def": "[é–‹ã‘ã‚‹]",
        "sample_sentence": "The store opened early today."
      }
    ]
  },
  {
    "round_number": 4,
    "words": [
      {
        "base_verb": "WALK",
        "past_tense": "walked",
        "category": "T",
        "japanese_def": "[æ­©ã]",
        "sample_sentence": "I walked to the park this morning."
      },
      {
        "base_verb": "OFFER",
        "past_tense": "offered",
        "category": "D",
        "japanese_def": "[æä¾›ã™ã‚‹]",
        "sample_sentence": "She offered him a cup of tea."
      },
      {
        "base_verb": "REMEMBER",
        "past_tense": "remembered",
        "category": "D",
        "japanese_def": "[æ€ã„å‡ºã™]",
        "sample_sentence": "He remembered the story from his childhood."
      },
      {
        "base_verb": "LOVE",
        "past_tense": "loved",
        "category": "D",
        "japanese_def": "[æ„›ã™ã‚‹]",
        "sample_sentence": "They loved their new home."
      },
      {
        "base_verb": "CONSIDER",
        "past_tense": "considered",
        "category": "D",
        "japanese_def": "[è€ƒãˆã‚‹]",
        "sample_sentence": "I considered all the options before deciding."
      },
      {
        "base_verb": "APPEAR",
        "past_tense": "appeared",
        "category": "D",
        "japanese_def": "[ç¾ã‚Œã‚‹]",
        "sample_sentence": "A small dog suddenly appeared from the bushes."
      },
      {
        "base_verb": "WAIT",
        "past_tense": "waited",
        "category": "ID",
        "japanese_def": "[å¾…ã¤]",
        "sample_sentence": "We waited for the train for thirty minutes."
      },
      {
        "base_verb": "SERVE",
        "past_tense": "served",
        "category": "D",
        "japanese_def": "[ä»•ãˆã‚‹]",
        "sample_sentence": "The waiter served the main course immediately."
      },
      {
        "base_verb": "DIE",
        "past_tense": "died",
        "category": "D",
        "japanese_def": "[æ­»ã¬]",
        "sample_sentence": "The ancient tree died last winter."
      },
      {
        "base_verb": "EXPECT",
        "past_tense": "expected",
        "category": "ID",
        "japanese_def": "[äºˆæœŸã™ã‚‹]",
        "sample_sentence": "We expected rain, but the sun shone brightly."
      }
    ]
  },
  {
    "round_number": 5,
    "words": [
      {
        "base_verb": "STAY",
        "past_tense": "stayed",
        "category": "D",
        "japanese_def": "[æ»åœ¨ã™ã‚‹]",
        "sample_sentence": "I stayed home all weekend."
      },
      {
        "base_verb": "REACH",
        "past_tense": "reached",
        "category": "T",
        "japanese_def": "[é”ã™ã‚‹]",
        "sample_sentence": "We reached the mountain summit by noon."
      },
      {
        "base_verb": "KILL",
        "past_tense": "killed",
        "category": "D",
        "japanese_def": "[æ®ºã™]",
        "sample_sentence": "The spider killed the mosquito instantly."
      },
      {
        "base_verb": "REMAIN",
        "past_tense": "remained",
        "category": "D",
        "japanese_def": "[æ®‹ã‚‹]",
        "sample_sentence": "The door remained locked all day."
      },
      {
        "base_verb": "SUGGEST",
        "past_tense": "suggested",
        "category": "ID",
        "japanese_def": "[ææ¡ˆã™ã‚‹]",
        "sample_sentence": "She suggested a break after the meeting."
      },
      {
        "base_verb": "RAISE",
        "past_tense": "raised",
        "category": "D",
        "japanese_def": "[ä¸Šã’ã‚‹]",
        "sample_sentence": "The government raised the taxes last year."
      },
      {
        "base_verb": "PASS",
        "past_tense": "passed",
        "category": "T",
        "japanese_def": "[é€šã‚Šéãã‚‹]",
        "sample_sentence": "A large truck passed us on the highway."
      },
      {
        "base_verb": "REQUIRE",
        "past_tense": "required",
        "category": "D",
        "japanese_def": "[è¦æ±‚ã™ã‚‹]",
        "sample_sentence": "The job required a university degree."
      },
      {
        "base_verb": "REPORT",
        "past_tense": "reported",
        "category": "ID",
        "japanese_def": "[å ±å‘Šã™ã‚‹]",
        "sample_sentence": "The journalists reported the news live."
      },
      {
        "base_verb": "DECIDE",
        "past_tense": "decided",
        "category": "ID",
        "japanese_def": "[æ±ºå®šã™ã‚‹]",
        "sample_sentence": "They decided to travel to Italy this summer."
      }
    ]
  },
  {
    "round_number": 6,
    "words": [
      {
        "base_verb": "PULL",
        "past_tense": "pulled",
        "category": "D",
        "japanese_def": "[å¼•ã]",
        "sample_sentence": "He pulled the door open carefully."
      },
      {
        "base_verb": "RETURN",
        "past_tense": "returned",
        "category": "D",
        "japanese_def": "[æˆ»ã‚‹]",
        "sample_sentence": "I returned the book to the library yesterday."
      },
      {
        "base_verb": "EXPLAIN",
        "past_tense": "explained",
        "category": "D",
        "japanese_def": "[èª¬æ˜ã™ã‚‹]",
        "sample_sentence": "She explained the rules of the game clearly."
      },
      {
        "base_verb": "HOPE",
        "past_tense": "hoped",
        "category": "T",
        "japanese_def": "[æœ›ã‚€]",
        "sample_sentence": "I hoped to see you at the concert."
      },
      {
        "base_verb": "DEVELOP",
        "past_tense": "developed",
        "category": "T",
        "japanese_def": "[ç™ºå±•ã•ã›ã‚‹]",
        "sample_sentence": "The company developed a new software application."
      },
      {
        "base_verb": "CARRY",
        "past_tense": "carried",
        "category": "D",
        "japanese_def": "[é‹ã¶]",
        "sample_sentence": "He carried his luggage up the stairs."
      },
      {
        "base_verb": "THANK",
        "past_tense": "thanked",
        "category": "T",
        "japanese_def": "[æ„Ÿè¬ã™ã‚‹]",
        "sample_sentence": "I thanked the chef for the wonderful meal."
      },
      {
        "base_verb": "RECEIVE",
        "past_tense": "received",
        "category": "D",
        "japanese_def": "[å—ã‘å–ã‚‹]",
        "sample_sentence": "We received the package this morning."
      },
      {
        "base_verb": "JOIN",
        "past_tense": "joined",
        "category": "D",
        "japanese_def": "[å‚åŠ ã™ã‚‹]",
        "sample_sentence": "She joined the club immediately after moving."
      },
      {
        "base_verb": "AGREE",
        "past_tense": "agreed",
        "category": "D",
        "japanese_def": "[åŒæ„ã™ã‚‹]",
        "sample_sentence": "They agreed on the final price."
      }
    ]
  },
  {
    "round_number": 7,
    "words": [
      {
        "base_verb": "PICK",
        "past_tense": "picked",
        "category": "T",
        "japanese_def": "[é¸ã¶]",
        "sample_sentence": "I picked a blue shirt to wear today."
      },
      {
        "base_verb": "SUPPORT",
        "past_tense": "supported",
        "category": "ID",
        "japanese_def": "[æ”¯æ´ã™ã‚‹]",
        "sample_sentence": "The community supported the local school fundraiser."
      },
      {
        "base_verb": "END",
        "past_tense": "ended",
        "category": "ID",
        "japanese_def": "[çµ‚ã‚ã‚‹]",
        "sample_sentence": "The meeting ended earlier than expected."
      },
      {
        "base_verb": "BASE",
        "past_tense": "based",
        "category": "T",
        "japanese_def": "[åŸºã¥ã]",
        "sample_sentence": "The movie was based on a true story."
      },
      {
        "base_verb": "PRODUCE",
        "past_tense": "produced",
        "category": "T",
        "japanese_def": "[ç”Ÿç”£ã™ã‚‹]",
        "sample_sentence": "The factory produced fifty cars last month."
      },
      {
        "base_verb": "FACE",
        "past_tense": "faced",
        "category": "T",
        "japanese_def": "[ç›´é¢ã™ã‚‹]",
        "sample_sentence": "We faced many challenges during the trip."
      },
      {
        "base_verb": "COVER",
        "past_tense": "covered",
        "category": "D",
        "japanese_def": "[è¦†ã†]",
        "sample_sentence": "Snow covered the ground overnight."
      },
      {
        "base_verb": "DESCRIBE",
        "past_tense": "described",
        "category": "D",
        "japanese_def": "[èª¬æ˜ã™ã‚‹]",
        "sample_sentence": "She described the suspect to the police."
      },
      {
        "base_verb": "CAUSE",
        "past_tense": "caused",
        "category": "D",
        "japanese_def": "[å¼•ãèµ·ã“ã™]",
        "sample_sentence": "The storm caused a lot of damage."
      },
      {
        "base_verb": "POINT",
        "past_tense": "pointed",
        "category": "ID",
        "japanese_def": "[æŒ‡ã™]",
        "sample_sentence": "He pointed the way to the nearest exit."
      }
    ]
  },
  {
    "round_number": 8,
    "words": [
      {
        "base_verb": "LISTEN",
        "past_tense": "listened",
        "category": "D",
        "japanese_def": "[èã]",
        "sample_sentence": "I listened to the radio all morning."
      },
      {
        "base_verb": "REALIZE",
        "past_tense": "realized",
        "category": "D",
        "japanese_def": "[æ°—ã¥ã]",
        "sample_sentence": "I realized my mistake immediately."
      },
      {
        "base_verb": "PLACE",
        "past_tense": "placed",
        "category": "T",
        "japanese_def": "[ç½®ã]",
        "sample_sentence": "She placed the vase on the windowsill."
      },
      {
        "base_verb": "CLOSE",
        "past_tense": "closed",
        "category": "D",
        "japanese_def": "[é–‰ã‚ã‚‹]",
        "sample_sentence": "The bank closed early for the holiday."
      },
      {
        "base_verb": "INVOLVE",
        "past_tense": "involved",
        "category": "D",
        "japanese_def": "[å·»ãè¾¼ã‚€]",
        "sample_sentence": "The incident involved three different cars."
      },
      {
        "base_verb": "INCREASE",
        "past_tense": "increased",
        "category": "T",
        "japanese_def": "[å¢—ã‚„ã™]",
        "sample_sentence": "The company increased its profits by 10%."
      },
      {
        "base_verb": "FILL",
        "past_tense": "filled",
        "category": "D",
        "japanese_def": "[æº€ãŸã™]",
        "sample_sentence": "He filled the bathtub with warm water."
      },
      {
        "base_verb": "REPRESENT",
        "past_tense": "represented",
        "category": "ID",
        "japanese_def": "[è¡¨ã™]",
        "sample_sentence": "The symbol represented peace and unity."
      },
      {
        "base_verb": "FOCUS",
        "past_tense": "focused",
        "category": "T",
        "japanese_def": "[é›†ä¸­ã™ã‚‹]",
        "sample_sentence": "She focused on her breathing during meditation."
      },
      {
        "base_verb": "DROP",
        "past_tense": "dropped",
        "category": "T",
        "japanese_def": "[è½ã¨ã™]",
        "sample_sentence": "I accidentally dropped my phone."
      }
    ]
  },
  {
    "round_number": 9,
    "words": [
      {
        "base_verb": "PLAN",
        "past_tense": "planned",
        "category": "D",
        "japanese_def": "[è¨ˆç”»ã™ã‚‹]",
        "sample_sentence": "They planned a big party for next month."
      },
      {
        "base_verb": "PUSH",
        "past_tense": "pushed",
        "category": "T",
        "japanese_def": "[æŠ¼ã™]",
        "sample_sentence": "The child pushed the toy car across the floor."
      },
      {
        "base_verb": "REDUCE",
        "past_tense": "reduced",
        "category": "T",
        "japanese_def": "[æ¸›ã‚‰ã™]",
        "sample_sentence": "The store reduced its prices last week."
      },
      {
        "base_verb": "NOTE",
        "past_tense": "noted",
        "category": "ID",
        "japanese_def": "[æ›¸ãç•™ã‚ã‚‹]",
        "sample_sentence": "He noted the main points of the lecture."
      },
      {
        "base_verb": "ENTER",
        "past_tense": "entered",
        "category": "D",
        "japanese_def": "[å…¥ã‚‹]",
        "sample_sentence": "We entered the building through the back door."
      },
      {
        "base_verb": "SHARE",
        "past_tense": "shared",
        "category": "D",
        "japanese_def": "[å…±æœ‰ã™ã‚‹]",
        "sample_sentence": "They shared their food with the others."
      },
      {
        "base_verb": "SAVE",
        "past_tense": "saved",
        "category": "D",
        "japanese_def": "[æ•‘ã†]",
        "sample_sentence": "I saved enough money for a new computer."
      },
      {
        "base_verb": "PROTECT",
        "past_tense": "protected",
        "category": "ID",
        "japanese_def": "[ä¿è­·ã™ã‚‹]",
        "sample_sentence": "The shield protected the soldier from harm."
      },
      {
        "base_verb": "OCCUR",
        "past_tense": "occurred",
        "category": "D",
        "japanese_def": "[ç™ºç”Ÿã™ã‚‹]",
        "sample_sentence": "The thought occurred to me later that evening."
      },
      {
        "base_verb": "ACCEPT",
        "past_tense": "accepted",
        "category": "ID",
        "japanese_def": "[å—ã‘å…¥ã‚Œã‚‹]",
        "sample_sentence": "The school accepted her application immediately."
      }
    ]
  },
  {
    "round_number": 10,
    "words": [
      {
        "base_verb": "DETERMINE",
        "past_tense": "determined",
        "category": "D",
        "japanese_def": "[æ±ºå®šã™ã‚‹]",
        "sample_sentence": "The investigation determined the cause of the fire."
      },
      {
        "base_verb": "PREPARE",
        "past_tense": "prepared",
        "category": "D",
        "japanese_def": "[æº–å‚™ã™ã‚‹]",
        "sample_sentence": "We prepared dinner for the entire family."
      },
      {
        "base_verb": "ARGUE",
        "past_tense": "argued",
        "category": "D",
        "japanese_def": "[è­°è«–ã™ã‚‹]",
        "sample_sentence": "They argued about the correct way to load the dishwasher."
      },
      {
        "base_verb": "RECOGNIZE",
        "past_tense": "recognized",
        "category": "D",
        "japanese_def": "[èªè­˜ã™ã‚‹]",
        "sample_sentence": "I recognized her voice instantly."
      },
      {
        "base_verb": "INDICATE",
        "past_tense": "indicated",
        "category": "ID",
        "japanese_def": "[ç¤ºã™]",
        "sample_sentence": "The sign indicated the road was closed."
      },
      {
        "base_verb": "WONDER",
        "past_tense": "wondered",
        "category": "D",
        "japanese_def": "[ä¸æ€è­°ã«æ€ã†]",
        "sample_sentence": "She wondered where her keys had gone."
      },
      {
        "base_verb": "FAIL",
        "past_tense": "failed",
        "category": "D",
        "japanese_def": "[å¤±æ•—ã™ã‚‹]",
        "sample_sentence": "The experiment failed to produce the expected results."
      },
      {
        "base_verb": "ARRIVE",
        "past_tense": "arrived",
        "category": "D",
        "japanese_def": "[åˆ°ç€ã™ã‚‹]",
        "sample_sentence": "The guests arrived exactly on time."
      },
      {
        "base_verb": "COOK",
        "past_tense": "cooked",
        "category": "T",
        "japanese_def": "[æ–™ç†ã™ã‚‹]",
        "sample_sentence": "We cooked dinner together last night."
      },
      {
        "base_verb": "IDENTIFY",
        "past_tense": "identified",
        "category": "D",
        "japanese_def": "[ç‰¹å®šã™ã‚‹]",
        "sample_sentence": "The police identified the suspect quickly."
      }
    ]
  },
  {
    "round_number": 11,
    "words": [
      {
        "base_verb": "BRUSH",
        "past_tense": "brushed",
        "category": "T",
        "japanese_def": "[ç£¨ã]",
        "sample_sentence": "She brushed her teeth before going to bed."
      },
      {
        "base_verb": "LAUGH",
        "past_tense": "laughed",
        "category": "T",
        "japanese_def": "[ç¬‘ã†]",
        "sample_sentence": "We laughed loudly at the funny movie."
      },
      {
        "base_verb": "PRINT",
        "past_tense": "printed",
        "category": "ID",
        "japanese_def": "[å°åˆ·ã™ã‚‹]",
        "sample_sentence": "I printed the document and signed it."
      },
      {
        "base_verb": "VISIT",
        "past_tense": "visited",
        "category": "ID",
        "japanese_def": "[è¨ªã‚Œã‚‹]",
        "sample_sentence": "They visited their grandparents last week."
      },
      {
        "base_verb": "LEARN",
        "past_tense": "learned",
        "category": "D",
        "japanese_def": "[å­¦ã¶]",
        "sample_sentence": "She learned to ride a bike when she was five."
      },
      {
        "base_verb": "BELONG",
        "past_tense": "belonged",
        "category": "D",
        "japanese_def": "[æ‰€å±ã™ã‚‹]",
        "sample_sentence": "The old toy belonged to my older brother."
      },
      {
        "base_verb": "SOLVE",
        "past_tense": "solved",
        "category": "D",
        "japanese_def": "[è§£æ±ºã™ã‚‹]",
        "sample_sentence": "The detective solved the mystery quickly."
      },
      {
        "base_verb": "MEASURE",
        "past_tense": "measured",
        "category": "D",
        "japanese_def": "[æ¸¬å®šã™ã‚‹]",
        "sample_sentence": "He measured the height of the wall."
      },
      {
        "base_verb": "TALK",
        "past_tense": "talked",
        "category": "T",
        "japanese_def": "[è©±ã™]",
        "sample_sentence": "We talked for hours about the movie."
      },
      {
        "base_verb": "WALK",
        "past_tense": "walked",
        "category": "T",
        "japanese_def": "[æ­©ã]",
        "sample_sentence": "I walked to the park this morning."
      }
    ]
  }
];

// =======================================================================
// PART 2: GAME LOGIC (The "Engine")
// =======================================================================

let currentRoundIndex = 0;
let currentWordIndex = 0;
let totalScore = 0;
let roundScore = 0;
let currentWord = {};

const synth = window.speechSynthesis;
let voice = null; 

// Utility function for dynamic Text-to-Speech
function speakText(text) {
    if (synth.speaking) {
        synth.cancel();
    }
    const utterThis = new SpeechSynthesisUtterance(text);
    
    if (voice) {
        utterThis.voice = voice;
    }
    
    utterThis.lang = 'en-US'; 
    utterThis.rate = 0.9; 
    synth.speak(utterThis);
}

// Function to find the American English voice
function findAmericanVoice() {
    const voices = synth.getVoices();
    voice = voices.find(v => v.lang === 'en-US' && v.name.includes('Google')) ||
            voices.find(v => v.lang === 'en-US');
}

// Function to hide instructions and start the game
function startGame() {
    document.getElementById('instructions-view').classList.add('hidden');
    document.getElementById('current-word-view').classList.remove('hidden');
    loadWord();
}

// Function to reset display and load the next word
function loadWord() {
    const roundData = GAME_DATA[currentRoundIndex];
    if (currentWordIndex >= roundData.words.length) {
        showRoundSummary();
        return;
    }

    currentWord = roundData.words[currentWordIndex];

    // Update headers and displays
    document.getElementById('round-header').textContent = `Round ${roundData.round_number}: Word ${currentWordIndex + 1} / 10`;
    document.getElementById('base-verb-display').textContent = currentWord.base_verb;
    document.getElementById('translation').textContent = currentWord.japanese_def;
    document.getElementById('question-text').textContent = 'Click the verb to hear it. What is its past tense?';
    document.getElementById('total-score-display').textContent = totalScore;
    
    // Hide past tense reveal and buttons
    document.getElementById('past-tense-container').classList.add('hidden');
    document.getElementById('reveal-button').classList.remove('hidden');
    document.getElementById('reward-visual').textContent = ''; 

    // Automatically speak the base verb on load
    speakText(currentWord.base_verb);
}

// Function to reveal the past tense and prompt for feedback
function revealPastTense() {
    document.getElementById('reveal-button').classList.add('hidden');
    document.getElementById('question-text').textContent = 'The past tense is:';
    
    const ptDisplay = document.getElementById('past-tense-display');
    ptDisplay.textContent = currentWord.past_tense;
    
    document.getElementById('past-tense-container').classList.remove('hidden');

    // Speak the correct past tense
    speakText(currentWord.past_tense);
}

// Function to handle the user's "Yes/No/Not Sure" feedback
function submitFeedback(points) {
    const rewardVisual = document.getElementById('reward-visual');
    let message = '';

    if (points === 1) {
        totalScore += 1;
        roundScore += 1;
        message = 'YES! That was perfect. ğŸ¥³';
        rewardVisual.textContent = 'âœ¨'; 
    } else if (points === 0.5) {
        totalScore += 0.5;
        roundScore += 0.5;
        message = 'Okay, getting closer! Half a coin. ğŸ¤”';
        rewardVisual.textContent = 'ğŸª™/2';
    } else {
        message = 'It\'s okay! Listen to the correct pronunciation again.';
        rewardVisual.textContent = 'âŒ';
    }

    // Temporarily show feedback message and reward
    document.getElementById('question-text').textContent = message;

    // Disable buttons temporarily
    document.querySelectorAll('#feedback-buttons button').forEach(btn => btn.disabled = true);

    // Wait 1.5 seconds before loading the next word
    setTimeout(() => {
        document.querySelectorAll('#feedback-buttons button').forEach(btn => btn.disabled = false);
        currentWordIndex++;
        loadWord();
    }, 1500);
}

// Function to display the round summary
function showRoundSummary() {
    document.getElementById('current-word-view').classList.add('hidden');
    document.getElementById('round-summary-view').classList.remove('hidden');

    const roundData = GAME_DATA[currentRoundIndex];
    document.getElementById('summary-round-number').textContent = roundData.round_number;
    document.getElementById('round-score-display').textContent = roundScore;

    const summaryList = document.getElementById('round-summary');
    summaryList.innerHTML = ''; 

    roundData.words.forEach(word => {
        const item = document.createElement('div');
        item.className = 'summary-item';
        item.innerHTML = `
            <strong>${word.base_verb} &rarr; ${word.past_tense}</strong>:
            ${word.sample_sentence}
        `;
        summaryList.appendChild(item);
    });

    // Update total score
    document.getElementById('total-score-display').textContent = totalScore;
}

// Function to start the next round
function startNextRound() {
    currentRoundIndex++;
    
    // --- REWARD GRAPHIC UPDATE (replaces old alert logic) ---
    if (currentRoundIndex >= GAME_DATA.length) {
        document.getElementById('current-word-view').classList.add('hidden');
        document.getElementById('round-summary-view').classList.add('hidden');

        // Display the final reward screen within the instructions-view container
        document.getElementById('instructions-view').innerHTML = `
            <h2 style="color: #4caf50;">Regular Verb Expert! â­</h2>
            <div style="font-size: 80px; margin: 20px 0;">
                <span role="img" aria-label="Star Trophy">ğŸŒŸ</span>
            </div>
            <p style="font-size: 1.5em; font-weight: bold; color: #e91e63;">Superb! You have mastered all ${GAME_DATA.length * 10} regular past tense forms!</p>
            <div class="score-box" style="font-size: 2em; margin-top: 30px; padding: 15px; border: 3px solid #4caf50; border-radius: 10px;">
                Final Score: <span id="final-score-display">${totalScore.toFixed(1)}</span> ğŸ¥‡
            </div>
            <p style="margin-top: 25px; color: #555;">Congratulations! Ready for a new challenge?</p>
            
            <a href="index.html" style="text-decoration: none;">
                <button style="margin-top: 20px;">Return to Main Menu</button>
            </a>
        `;
        
        document.getElementById('instructions-view').classList.remove('hidden');
        document.getElementById('total-score-display').textContent = totalScore.toFixed(1); // Update the final score display below the container
        return;
    }
    // --- END OF REWARD GRAPHIC UPDATE ---

    currentWordIndex = 0;
    roundScore = 0;
    document.getElementById('round-summary-view').classList.add('hidden');
    document.getElementById('current-word-view').classList.remove('hidden');
    
    loadWord();
}

// Start the game by loading the instructions screen first
window.onload = function() {
    // 1. Load voices when the page loads
    if (synth.getVoices().length === 0) {
        synth.onvoiceschanged = findAmericanVoice;
    } else {
        findAmericanVoice();
    }
    // 2. Show the instruction screen. The game logic starts when the user clicks "Start Game".
};

</script>
</body>
</html>
